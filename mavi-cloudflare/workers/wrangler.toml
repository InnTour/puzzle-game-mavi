name = "mavi-puzzle-api"
main = "src/index.js"
compatibility_date = "2024-11-18"
workers_dev = true

# Cloudflare D1 Database binding
[[d1_databases]]
binding = "DB"
database_name = "mavi-puzzle-db"
database_id = "your-database-id" # Will be created with: wrangler d1 create mavi-puzzle-db

# Cloudflare R2 Storage binding
[[r2_buckets]]
binding = "PUZZLE_IMAGES"
bucket_name = "mavi-puzzle-images"

# Environment variables
[vars]
ENVIRONMENT = "production"
CORS_ORIGIN = "*"

# Secrets (set with: wrangler secret put SECRET_NAME)
# ADMIN_PASSWORD
# JWT_SECRET

# Routes for production
[env.production]
routes = [
  { pattern = "api.mavi-puzzle.com/*", zone_name = "mavi-puzzle.com" }
]

[env.production.vars]
ENVIRONMENT = "production"
